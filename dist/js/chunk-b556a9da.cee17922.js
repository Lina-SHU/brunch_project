(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b556a9da"],{"1dde":function(t,e,c){var o=c("d039"),r=c("b622"),n=c("2d00"),a=r("species");t.exports=function(t){return n>=51||!o((function(){var e=[],c=e.constructor={};return c[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},5727:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),r=Object(o["createVNode"])("div",{class:"carts-heroheader mb-5"},[Object(o["createVNode"])("div",{class:"container"},[Object(o["createVNode"])("h2",{"data-aos":"flip-up",class:"text-white position-absolute top-50 bg-black px-5 py-2 lh-base"},[Object(o["createTextVNode"])(" 當日現做"),Object(o["createVNode"])("br"),Object(o["createTextVNode"])(" 美味到府 ")])])],-1),n={class:"container"},a=Object(o["createStaticVNode"])('<div class="row d-flex-center"><div class="col-md-6"><ul class="process d-flex justify-content-between list-unstyled"><li class="circle rounded-circle text-center bg-primary text-white py-lg-4 py-3"> 1. <br><span class="d-none d-lg-inline">清單確認</span><i class="material-icons icons text-primary">navigate_next</i></li><li class="circle rounded-circle text-center bg-secondary text-primary py-lg-4 py-3"> 2. <br><span class="d-none d-lg-inline">資料填寫</span><i class="material-icons icons text-primary">navigate_next</i></li><li class="circle rounded-circle text-center bg-secondary text-primary py-lg-4 py-3"> 3. <br><span class="d-none d-lg-inline">付款確認</span><i class="material-icons icons text-primary">navigate_next</i></li><li class="circle rounded-circle text-center bg-secondary text-primary py-lg-4 py-3"> 4. <br><span class="d-none d-lg-inline">完成訂單</span></li></ul></div></div><h3 class="text-center my-4 text-primary"><strong data-aos="flip-up" class="border-bottom border-primary d-inline-block border-4 pb-2">購物車</strong></h3>',2),i={class:"row d-flex-center my-3"},s={class:"col-md-8"},l=Object(o["createVNode"])("i",{class:"material-icons me-2"},"delete",-1),d=Object(o["createTextVNode"])("刪除購物車"),u={class:"d-flex justify-content-between"},b=Object(o["createTextVNode"])("繼續購物");function p(t,e,c,p,j,O){var f=Object(o["resolveComponent"])("Loading"),h=Object(o["resolveComponent"])("CartList"),m=Object(o["resolveComponent"])("router-link"),g=Object(o["resolveComponent"])("FooterSection");return Object(o["openBlock"])(),Object(o["createBlock"])("section",null,[Object(o["createVNode"])(f,{"is-loading":j.isLoading},null,8,["is-loading"]),r,Object(o["createVNode"])("div",n,[a,Object(o["createVNode"])("div",i,[Object(o["createVNode"])("div",s,[j.carts.carts&&j.carts.carts.length>=2?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"btn btn-outline-danger border-0 d-flex align-items-center mb-3",onClick:e[1]||(e[1]=Object(o["withModifiers"])((function(){return O.deleteAllCart&&O.deleteAllCart.apply(O,arguments)}),["prevent"]))},[l,d])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(h,{"carts-list":j.carts,onGetCarts:O.getCarts},null,8,["carts-list","onGetCarts"]),Object(o["createVNode"])("div",u,[Object(o["createVNode"])(m,{to:"/products",class:"btn btn-lg btn-outline-primary"},{default:Object(o["withCtx"])((function(){return[b]})),_:1}),Object(o["createVNode"])("button",{class:["btn btn-lg btn-primary",{disabled:j.carts.carts&&0===j.carts.carts.length}],onClick:e[2]||(e[2]=function(){return O.goTOpay&&O.goTOpay.apply(O,arguments)})},"結帳去",2)])])])]),Object(o["createVNode"])(g)])}c("99af");var j=c("aee4"),O=c("8917"),f={class:"table-responsive d-none d-lg-block"},h={class:"table text-primary text-nowrap",style:{"min-width":"500px"}},m=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{class:"text-center"}),Object(o["createVNode"])("th",{class:"text-center",width:"20%"},"餐點圖片"),Object(o["createVNode"])("th",{class:"text-center"},"餐點名稱"),Object(o["createVNode"])("th",{class:"text-center",width:"30%"},"數量"),Object(o["createVNode"])("th",{class:"text-center"},"價格")])],-1),g=Object(o["createVNode"])("i",{class:"btn-outline-danger border-0 rounded-2 material-icons p-1"},"delete",-1),v={class:"py-3"},y={class:"input-group"},V=Object(o["createVNode"])("i",{class:"material-icons"},"add",-1),N={class:"text-end"},x={key:1},C={colspan:"5",class:"text-center py-3"},k=Object(o["createVNode"])("p",{class:"text-center"},"購物車是空的唷！",-1),w=Object(o["createTextVNode"])("訂餐去"),B={colspan:"5",class:"fw-bold text-end fs-5"},L={class:"d-lg-none"},$={key:0,class:"list-unstyled"},T={class:"d-flex justify-content-between mb-3"},q=Object(o["createVNode"])("i",{class:"btn-outline-danger border-0 rounded-2 material-icons p-1"},"delete",-1),A={class:"d-flex justify-content-between"},S={class:"input-group w-50"},_=Object(o["createVNode"])("i",{class:"material-icons"},"add",-1),U={class:"m-0 d-flex-center align-items-center"},D={key:1,class:"d-flex-center flex-column align-items-center mb-3 py-3 shadow-sm"},M=Object(o["createVNode"])("p",{class:"text-center"},"購物車是空的唷！",-1),F=Object(o["createTextVNode"])("訂餐去");function z(t,e,c,r,n,a){var i=Object(o["resolveComponent"])("Loading"),s=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])("section",null,[Object(o["createVNode"])(i,{"is-loading":n.isLoading},null,8,["is-loading"]),Object(o["createVNode"])("div",f,[Object(o["createVNode"])("table",h,[m,Object(o["createVNode"])("tbody",null,[n.carts.carts&&0!==n.carts.carts.length?(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(n.carts.carts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id,class:"align-middle"},[Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",{href:"#",onClick:Object(o["withModifiers"])((function(t){return a.deleteCart(e.id)}),["prevent"]),class:" d-flex-center align-items-center"},[g],8,["onClick"])]),Object(o["createVNode"])("td",v,[Object(o["createVNode"])("div",{class:"product-img shadow-sm",style:[{"background-image":"url(".concat(e.product.imageUrl)},{"background-size":"cover","background-position":"30% center",height:"75px"}]},null,4)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])(s,{to:{path:"/product/".concat(e.product.id)},class:"cartProduct"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.product.title),1)]})),_:2},1032,["to"])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",y,[Object(o["createVNode"])("button",{class:["btn btn-sm btn-outline-primary",{disabled:e.qty<=1}],type:"button"},[Object(o["createVNode"])("i",{class:"material-icons",onClick:function(t){return a.editCart(e,e.qty-1)}},"remove",8,["onClick"])],2),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",min:"1",class:"form-control qty-input",disabled:"","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.qty,void 0,{number:!0}]]),Object(o["createVNode"])("button",{class:"btn btn-sm btn-outline-primary",type:"button",onClick:function(t){return a.editCart(e,e.qty+1)}},[V],8,["onClick"])])]),Object(o["createVNode"])("td",N,Object(o["toDisplayString"])(t.$toCurrency("".concat(e.total))),1)])})),128)):(Object(o["openBlock"])(),Object(o["createBlock"])("tr",x,[Object(o["createVNode"])("td",C,[k,Object(o["createVNode"])(s,{to:"/products",class:"btn btn-primary px-5"},{default:Object(o["withCtx"])((function(){return[w]})),_:1})])]))]),Object(o["createVNode"])("tfoot",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("td",B," 結帳金額： NT$ "+Object(o["toDisplayString"])(t.$toCurrency("".concat(n.carts.total))),1)])])])]),Object(o["createVNode"])("div",L,[n.carts.carts&&0!==n.carts.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("ul",$,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(n.carts.carts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:e.id+1,class:"shadow p-3 mb-2"},[Object(o["createVNode"])("div",T,[Object(o["createVNode"])("a",{href:"#",onClick:Object(o["withModifiers"])((function(t){return a.deleteCart(e.id)}),["prevent"]),class:"d-flex-center align-items-center"},[q],8,["onClick"]),Object(o["createVNode"])("div",{class:"product-img shadow-sm w-50",style:[{"background-image":"url(".concat(e.product.imageUrl)},{"background-size":"cover","background-position":"30% center",height:"75px"}]},null,4),Object(o["createVNode"])(s,{to:{path:"/product/".concat(e.product.id)},class:"cartProduct d-flex-center align-items-center px-2"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.product.title),1)]})),_:2},1032,["to"])]),Object(o["createVNode"])("div",A,[Object(o["createVNode"])("div",S,[Object(o["createVNode"])("button",{class:["btn btn-sm btn-outline-primary",{disabled:e.qty<=1}],type:"button"},[Object(o["createVNode"])("i",{class:"material-icons",onClick:function(t){return a.editCart(e,e.qty-1)}},"remove",8,["onClick"])],2),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",min:"1",class:"form-control qty-input",disabled:"","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.qty,void 0,{number:!0}]]),Object(o["createVNode"])("button",{class:"btn btn-sm btn-outline-primary",type:"button",onClick:function(t){return a.editCart(e,e.qty+1)}},[_],8,["onClick"])]),Object(o["createVNode"])("p",U,"金額： NT $"+Object(o["toDisplayString"])(t.$toCurrency("".concat(e.total))),1)])])})),128))])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",D,[M,Object(o["createVNode"])(s,{to:"/products",class:"btn btn-primary px-5"},{default:Object(o["withCtx"])((function(){return[F]})),_:1})]))])])}var R=c("7ccb"),E={data:function(){return{carts:"",isLoading:!1}},components:{Loading:R["a"]},props:["cartsList"],methods:{deleteCart:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart/").concat(t);this.$http.delete(c).then((function(t){t.data.success&&(e.isLoading=!1,e.$swal({toast:!0,title:"已成功刪除餐點",icon:"success",timer:1500,showConfirmButton:!1,position:"top"}),e.$emit("getCarts"),j["a"].emit("product-cart"))})).catch((function(t){t&&(e.isLoading=!1,e.$swal({toast:!0,title:"無法刪除餐點，請聯繫管理員",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}))}))},editCart:function(t,e){var c=this;this.isLoading=!0;var o={data:{product_id:t.product.id,qty:e}},r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart/").concat(t.id);this.$http.put(r,o).then((function(t){t.data.success&&(c.isLoading=!1,j["a"].emit("product-cart"),c.$emit("getCarts"))})).catch((function(t){t&&(c.isLoading=!1,c.$swal({toast:!0,title:"無法修改餐點數量，請聯繫管理員",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}))}))}},watch:{cartsList:function(){this.carts=this.cartsList}}};E.render=z;var G=E,H={data:function(){return{carts:{},isLoading:!1}},components:{FooterSection:O["a"],Loading:R["a"],CartList:G},methods:{getCarts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/cart");this.$http.get(e).then((function(e){t.isLoading=!1,e.data.success&&(t.carts=e.data.data)})).catch((function(e){e&&(t.isLoading=!1,t.$swal({toast:!0,title:"無法取得購物車列表，請聯繫管理員",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}))}))},deleteAllCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.isLoading=!1,t.$swal({toast:!0,title:"購物車清空囉！",icon:"success",timer:1500,showConfirmButton:!1,position:"top"}),t.getCarts(),j["a"].emit("product-cart"),t.$router.push("/products"))})).catch((function(e){e&&(t.isLoading=!1,t.$swal({toast:!0,title:"無法清空購物車，請聯繫管理員",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}))}))},goTOpay:function(){this.carts.carts&&0===this.carts.carts.length?(this.$swal({toast:!0,title:"購物車不能是空的唷！",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}),this.$router.push("/products")):this.$router.push("/order")}},mounted:function(){var t=this;this.getCarts(),j["a"].on("product-cart",(function(){t.getCarts()}))},unmounted:function(){var t=this;j["a"].off("product-cart",(function(){t.getCarts()}))}};H.render=p;e["default"]=H},"65f0":function(t,e,c){var o=c("861d"),r=c("e8b5"),n=c("b622"),a=n("species");t.exports=function(t,e){var c;return r(t)&&(c=t.constructor,"function"!=typeof c||c!==Array&&!r(c.prototype)?o(c)&&(c=c[a],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===e?0:e)}},"7ccb":function(t,e,c){"use strict";var o=c("7a23"),r=Object(o["createVNode"])("div",{class:"loadingio-spinner-ellipsis-rg3crixpxzh"},[Object(o["createVNode"])("div",{class:"ldio-zmt4lrj3aj"},[Object(o["createVNode"])("div"),Object(o["createVNode"])("div"),Object(o["createVNode"])("div"),Object(o["createVNode"])("div"),Object(o["createVNode"])("div")])],-1);function n(t,e,c,n,a,i){var s=Object(o["resolveComponent"])("loading",!0);return Object(o["openBlock"])(),Object(o["createBlock"])(s,{active:t.isLoading,"onUpdate:active":e[1]||(e[1]=function(e){return t.isLoading=e})},{default:Object(o["withCtx"])((function(){return[r]})),_:1},8,["active"])}var a={props:["is-loading"]};a.render=n;e["a"]=a},8418:function(t,e,c){"use strict";var o=c("c04e"),r=c("9bf2"),n=c("5c6c");t.exports=function(t,e,c){var a=o(e);a in t?r.f(t,a,n(0,c)):t[a]=c}},8917:function(t,e,c){"use strict";var o=c("7a23"),r={class:"text-white bg-primary text-center py-4"},n=Object(o["createVNode"])("h2",{class:"h1 logo text-shadow"},"FRESH BRUNCH",-1),a=Object(o["createVNode"])("p",{class:"mb-0 mt-2"},"© 2021 All Rights Reserved.",-1);function i(t,e){return Object(o["openBlock"])(),Object(o["createBlock"])("footer",r,[n,a])}const s={};s.render=i;e["a"]=s},"99af":function(t,e,c){"use strict";var o=c("23e7"),r=c("d039"),n=c("e8b5"),a=c("861d"),i=c("7b0b"),s=c("50c4"),l=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),j=b("isConcatSpreadable"),O=9007199254740991,f="Maximum allowed index exceeded",h=p>=51||!r((function(){var t=[];return t[j]=!1,t.concat()[0]!==t})),m=u("concat"),g=function(t){if(!a(t))return!1;var e=t[j];return void 0!==e?!!e:n(t)},v=!h||!m;o({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,o,r,n,a=i(this),u=d(a,0),b=0;for(e=-1,o=arguments.length;e<o;e++)if(n=-1===e?a:arguments[e],g(n)){if(r=s(n.length),b+r>O)throw TypeError(f);for(c=0;c<r;c++,b++)c in n&&l(u,b,n[c])}else{if(b>=O)throw TypeError(f);l(u,b++,n)}return u.length=b,u}})},aee4:function(t,e,c){"use strict";var o=function(t){return{all:t=t||new Map,on:function(e,c){var o=t.get(e);o?o.push(c):t.set(e,[c])},off:function(e,c){var o=t.get(e);o&&(c?o.splice(o.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var o=t.get(e);o&&o.slice().map((function(t){t(c)})),(o=t.get("*"))&&o.slice().map((function(t){t(e,c)}))}}};e["a"]=o()},e8b5:function(t,e,c){var o=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==o(t)}}}]);
//# sourceMappingURL=chunk-b556a9da.cee17922.js.map