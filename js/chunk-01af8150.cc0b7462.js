(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01af8150"],{3996:function(e,t,o){"use strict";var c=o("7a23"),a={class:"d-flex-center"},r={"aria-label":"Page navigation"},i={class:"pagination"};function n(e,t,o,n,s,l){return Object(c["openBlock"])(),Object(c["createBlock"])("div",a,[Object(c["createVNode"])("nav",r,[Object(c["createVNode"])("ul",i,[Object(c["createVNode"])("li",{class:["page-item",{disabled:!o.pages.has_pre}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(t){return e.$emit("getList",o.pages.current_page-1)}),["prevent"]))},"上一頁")],2),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(o.pages.total_pages,(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{class:["page-item",{active:o.pages.current_page===t}],key:t},[Object(c["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(c["withModifiers"])((function(o){return e.$emit("getList",t)}),["prevent"])},Object(c["toDisplayString"])(t),9,["onClick"])],2)})),128)),Object(c["createVNode"])("li",{class:["page-item",{disabled:!o.pages.has_next}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(t){return e.$emit("getList",o.pages.current_page+1)}),["prevent"]))},"下一頁")],2)])])])}var s={props:["pages"]};s.render=n;t["a"]=s},7629:function(e,t,o){"use strict";o.r(t);o("b0c0");var c=o("7a23"),a={class:"container py-3 mt-5"},r=Object(c["createVNode"])("h1",{class:"text-center mb-4 text-primary fs-2"},[Object(c["createVNode"])("strong",{class:"border-bottom border-primary d-inline-block border-4 pb-2"},"訂單列表")],-1),i={class:"d-flex justify-content-end"},n={class:"table mt-3"},s=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",{class:"text-center"},[Object(c["createVNode"])("th",{scope:"col"}),Object(c["createVNode"])("th",{scope:"col"},"訂單編號"),Object(c["createVNode"])("th",{scope:"col"},"訂購人姓名"),Object(c["createVNode"])("th",{scope:"col"},"訂購人 Email"),Object(c["createVNode"])("th",{scope:"col"},"訂購日期"),Object(c["createVNode"])("th",{scope:"col"},"是否付款"),Object(c["createVNode"])("th",{scope:"col"},"編輯")])],-1),l=Object(c["createVNode"])("i",{class:"btn-outline-danger border-0 rounded-2 material-icons p-1"},"delete",-1);function d(e,t,o,d,b,p){var u=Object(c["resolveComponent"])("loading"),O=Object(c["resolveComponent"])("Pagination"),m=Object(c["resolveComponent"])("EditModal");return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[Object(c["createVNode"])(u,{active:b.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return b.isLoading=e})},null,8,["active"]),Object(c["createVNode"])("div",a,[r,Object(c["createVNode"])("div",i,[b.orderList.length>=2?(Object(c["openBlock"])(),Object(c["createBlock"])("button",{key:0,class:"btn btn-danger",onClick:t[2]||(t[2]=function(){return p.deleteAll&&p.deleteAll.apply(p,arguments)})},"刪除所有訂單")):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("table",n,[s,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(b.orderList,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.id},[Object(c["createVNode"])("td",null,[Object(c["createVNode"])("a",{href:"#",onClick:Object(c["withModifiers"])((function(t){return p.deleteOrder(e.id)}),["prevent"]),class:"d-flex-center align-items-center"},[l],8,["onClick"])]),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.id),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.user.name),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.user.email),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(new Date(1e3*e.create_at).getFullYear())+"/"+Object(c["toDisplayString"])(new Date(1e3*e.create_at).getMonth()+1)+"/"+Object(c["toDisplayString"])(new Date(1e3*e.create_at).getDate()),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.is_paid?"已付款":"未付款"),1),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("button",{class:"btn btn-primary me-2",type:"button",onClick:function(t){return p.editOrder(e)}},"編輯",8,["onClick"])])])})),128))])]),Object(c["createVNode"])(O,{pages:b.pagination,onGetList:p.getOrder},null,8,["pages","onGetList"]),Object(c["createVNode"])(m,{ref:"editModal","temp-order":b.tempOrder,onGetOrder:p.getOrder},null,8,["temp-order","onGetOrder"])])])}o("99af");var b=o("3996"),p={class:"modal fade",id:"modal",ref:"modal"},u={class:"modal-dialog"},O={class:"modal-content"},m=Object(c["createVNode"])("div",{class:"modal-header"},[Object(c["createVNode"])("h5",{class:"modal-title"},"訂單編輯"),Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),h={class:"modal-body"},j={class:"mb-3"},f=Object(c["createVNode"])("label",{for:"orderId",class:"form-label"},"訂單編號",-1),g={class:"accordion accordion-flush",id:"orderAccordion"},V={class:"accordion-item"},N=Object(c["createVNode"])("h2",{class:"accordion-header",id:"flush-headingOne"},[Object(c["createVNode"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"}," 訂購人資訊 ")],-1),v={id:"flush-collapseOne",class:"accordion-collapse collapse","aria-labelledby":"flush-headingOne","data-bs-parent":"#orderAccordion"},w={class:"accordion-body"},y={class:"mb-3"},k=Object(c["createVNode"])("label",{for:"orderName",class:"form-label"},"訂單人姓名",-1),x={class:"mb-3"},L=Object(c["createVNode"])("label",{for:"email",class:"form-label"},"訂單人Email",-1),C={class:"mb-3"},B=Object(c["createVNode"])("label",{for:"tel",class:"form-label"},"訂單人電話",-1),M={class:"mb-3"},D=Object(c["createVNode"])("label",{for:"address",class:"form-label"},"訂單人地址",-1),$={class:"mb-3"},T=Object(c["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),_={class:"accordion-item"},S=Object(c["createVNode"])("h2",{class:"accordion-header",id:"flush-headingTwo"},[Object(c["createVNode"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseTwo","aria-expanded":"false","aria-controls":"flush-collapseTwo"}," 訂單資訊 ")],-1),U={id:"flush-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"flush-headingTwo","data-bs-parent":"#orderAccordion"},A={class:"accordion-body"},P={class:"mb-3"},E=Object(c["createVNode"])("label",{for:"total",class:"form-label"},[Object(c["createTextVNode"])("訂單總額 "),Object(c["createVNode"])("small",{class:"text-danger"},"*必填")],-1),F={class:"form-check"},G=Object(c["createVNode"])("label",{class:"form-check-label",for:"isPaid"}," 是否付款 ",-1),J={class:"modal-footer"},I=Object(c["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function Y(e,t,o,a,r,i){var n=Object(c["resolveComponent"])("loading");return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[Object(c["createVNode"])(n,{active:r.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return r.isLoading=e})},null,8,["active"]),Object(c["createVNode"])("div",p,[Object(c["createVNode"])("div",u,[Object(c["createVNode"])("div",O,[m,Object(c["createVNode"])("div",h,[Object(c["createVNode"])("div",j,[f,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"orderId",disabled:"","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.temp.id=e})},null,512),[[c["vModelText"],r.temp.id]])]),Object(c["createVNode"])("div",g,[Object(c["createVNode"])("div",V,[N,Object(c["createVNode"])("div",v,[Object(c["createVNode"])("div",w,[Object(c["createVNode"])("div",y,[k,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"orderName","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.temp.user.name=e})},null,512),[[c["vModelText"],r.temp.user.name]])]),Object(c["createVNode"])("div",x,[L,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"email","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.temp.user.email=e})},null,512),[[c["vModelText"],r.temp.user.email]])]),Object(c["createVNode"])("div",C,[B,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"tel",class:"form-control",id:"tel","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.temp.user.tel=e})},null,512),[[c["vModelText"],r.temp.user.tel]])]),Object(c["createVNode"])("div",M,[D,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.temp.user.address=e})},null,512),[[c["vModelText"],r.temp.user.address]])]),Object(c["createVNode"])("div",$,[T,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"message","onUpdate:modelValue":t[7]||(t[7]=function(e){return r.temp.message=e}),disabled:""},null,512),[[c["vModelText"],r.temp.message]])])])])]),Object(c["createVNode"])("div",_,[S,Object(c["createVNode"])("div",U,[Object(c["createVNode"])("div",A,[Object(c["createVNode"])("div",P,[E,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",class:"form-control",id:"total","onUpdate:modelValue":t[8]||(t[8]=function(e){return r.temp.total=e})},null,512),[[c["vModelText"],r.temp.total,void 0,{number:!0}]])]),Object(c["createVNode"])("div",F,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"isPaid","onUpdate:modelValue":t[9]||(t[9]=function(e){return r.temp.is_paid=e})},null,512),[[c["vModelCheckbox"],r.temp.is_paid]]),G])])])])])]),Object(c["createVNode"])("div",J,[I,Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[10]||(t[10]=function(){return i.editOrder&&i.editOrder.apply(i,arguments)})},"確認")])])])],512)])}var q=o("8010"),z={data:function(){return{modal:"",temp:{user:{}},isLoading:!1}},mixins:[q["a"]],emits:["getOrder"],props:["tempOrder"],methods:{editOrder:function(){var e=this;if(this.isLoading=!0,!this.temp.total)return this.isLoading=!1,void this.$swal({toast:!0,title:"必填項目都要填寫唷！",icon:"error",timer:1500,showConfirmButton:!1,position:"top"});var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/order/").concat(this.temp.id);this.$http.put(t,{data:this.temp}).then((function(t){t.data.success&&(e.isLoading=!1,e.$swal({toast:!0,title:"編輯成功",icon:"success",timer:1500,showConfirmButton:!1,position:"top"}),e.hideModal(),e.$emit("getOrder"))})).catch((function(t){t&&(e.isLoading=!1,e.$swal({toast:!0,title:"無法編輯訂單，請聯繫管理員",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}))}))}},watch:{tempOrder:function(){this.temp=this.tempOrder}}};z.render=Y;var H=z,K={data:function(){return{orderList:[],pagination:[],tempOrder:[],isLoading:!1}},components:{Pagination:b["a"],EditModal:H},methods:{getOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/orders?page=").concat(t);this.$http.get(o).then((function(t){t.data.success&&(e.isLoading=!1,e.orderList=t.data.orders,e.pagination=t.data.pagination)})).catch((function(t){t&&(e.isLoading=!1,e.$swal({toast:!0,title:"無法取得訂單列表，請聯繫管理員",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}))}))},deleteOrder:function(e){var t=this;this.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/order/").concat(e);this.$http.delete(o).then((function(e){e.data.success&&(t.isLoading=!1,t.$swal({toast:!0,title:"已成功刪除",icon:"success",timer:1500,showConfirmButton:!1,position:"top"}),t.getOrder())})).catch((function(e){e&&(t.isLoading=!1,t.$swal({toast:!0,title:"無法刪除訂單，請聯繫管理員",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}))}))},deleteAll:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("linachen","/admin/orders/all");this.$http.delete(t).then((function(t){t.data.success&&(e.isLoading=!1,e.$swal({toast:!0,title:"訂單清空囉！",icon:"success",timer:1500,showConfirmButton:!1,position:"top"}),e.getOrder())})).catch((function(t){t&&(e.isLoading=!1,e.$swal({toast:!0,title:"無法清空訂單，請聯繫管理員",icon:"error",timer:1500,showConfirmButton:!1,position:"top"}))}))},editOrder:function(e){this.tempOrder=JSON.parse(JSON.stringify(e)),this.$refs.editModal.openModal()}},created:function(){this.getOrder()}};K.render=d;t["default"]=K},8010:function(e,t,o){"use strict";var c=o("7c2b"),a=o.n(c);t["a"]={methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new a.a(this.$refs.modal,{backdrop:"static"})}}},b0c0:function(e,t,o){var c=o("83ab"),a=o("9bf2").f,r=Function.prototype,i=r.toString,n=/^\s*function ([^ (]*)/,s="name";c&&!(s in r)&&a(r,s,{configurable:!0,get:function(){try{return i.call(this).match(n)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-01af8150.cc0b7462.js.map